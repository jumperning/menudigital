{"ast":null,"code":"var _jsxFileName = \"/Users/maxrodri/Documents/sites/MENUDIGITAL/src/components/UserPanelLayout.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { AuthContext } from './Auth';\nimport { database } from '../firebaseConfig';\nimport HeaderUserPanel from './HeaderUserPanel';\nimport Notiflix from 'notiflix';\n\nconst UserPanelLayout = ({\n  children,\n  title,\n  isMiMenu,\n  openModal,\n  setActive\n}) => {\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const switchInput = document.getElementById('switch');\n  useEffect(() => {\n    if (isMiMenu) {\n      getMenuData();\n    }\n  }, []);\n\n  const handleCheck = async () => {\n    if (switchInput.checked) {\n      setActive(true);\n      const newMenu = {\n        idUser: currentUser.uid\n      };\n\n      try {\n        switchInput.disabled = true;\n        await database.collection('menus').doc().set(newMenu);\n        switchInput.disabled = false;\n      } catch (error) {\n        Notiflix.Notify.Failure('Algo salió mal.');\n        switchInput.disabled = false;\n      }\n    } else {\n      setActive(false);\n      switchInput.disabled = true;\n      database.collection('menus').where('idUser', '==', currentUser.uid).get().then(function (querySnapshot) {\n        var batch = database.batch();\n        querySnapshot.forEach(function (doc) {\n          batch.delete(doc.ref);\n        });\n        return batch.commit();\n      }).then(() => {\n        switchInput.disabled = false;\n      }).catch(err => {\n        Notiflix.Notify.Failure('Algo salió mal.');\n      });\n    }\n  };\n\n  const getMenuData = async () => {\n    const switchInput = document.getElementById('switch');\n    const menus = [];\n\n    try {\n      const response = await database.collection('menus').where('idUser', '==', currentUser.uid).get();\n      response.forEach(doc => {\n        menus.push({ ...doc.data(),\n          id: doc.id\n        });\n      });\n    } catch (error) {\n      Notiflix.Notify.Failure('Algo salió mal.');\n    }\n\n    if (menus.length) {\n      switchInput.checked = true;\n      setActive(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-panel-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(HeaderUserPanel, {\n    currentUser: currentUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-panel__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"user-panel__title--h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 6\n    }\n  }, title), isMiMenu && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => openModal(true),\n    className: \"user-panel__title--button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, \"A\\xF1adir comida\", /*#__PURE__*/React.createElement(\"img\", {\n    className: \"user-panel__title--button-icon\",\n    src: \"/img/icons/plus-circle.svg\",\n    alt: \"+\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 8\n    }\n  })), isMiMenu && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"switch-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"switch-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 8\n    }\n  }, \"Publicar\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    className: \"user-panel__switch_input\",\n    id: \"switch\",\n    onChange: handleCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"user-panel__switch_label\",\n    htmlFor: \"switch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 8\n    }\n  }, \"Toggle\"))), children));\n};\n\nexport default UserPanelLayout;","map":{"version":3,"sources":["/Users/maxrodri/Documents/sites/MENUDIGITAL/src/components/UserPanelLayout.js"],"names":["React","useContext","useEffect","AuthContext","database","HeaderUserPanel","Notiflix","UserPanelLayout","children","title","isMiMenu","openModal","setActive","currentUser","switchInput","document","getElementById","getMenuData","handleCheck","checked","newMenu","idUser","uid","disabled","collection","doc","set","error","Notify","Failure","where","get","then","querySnapshot","batch","forEach","delete","ref","commit","catch","err","menus","response","push","data","id","length"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react'\nimport { AuthContext } from './Auth'\nimport { database } from '../firebaseConfig'\nimport HeaderUserPanel from './HeaderUserPanel'\nimport Notiflix from 'notiflix'\n\nconst UserPanelLayout = ({\n\tchildren,\n\ttitle,\n\tisMiMenu,\n\topenModal,\n\tsetActive,\n}) => {\n\tconst { currentUser } = useContext(AuthContext)\n\tconst switchInput = document.getElementById('switch')\n\n\tuseEffect(() => {\n\t\tif (isMiMenu) {\n\t\t\tgetMenuData()\n\t\t}\n\t}, [])\n\n\tconst handleCheck = async () => {\n\t\tif (switchInput.checked) {\n\t\t\tsetActive(true)\n\t\t\tconst newMenu = {\n\t\t\t\tidUser: currentUser.uid,\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tswitchInput.disabled = true\n\t\t\t\tawait database.collection('menus').doc().set(newMenu)\n\t\t\t\tswitchInput.disabled = false\n\t\t\t} catch (error) {\n\t\t\t\tNotiflix.Notify.Failure('Algo salió mal.')\n\t\t\t\tswitchInput.disabled = false\n\t\t\t}\n\t\t} else {\n\t\t\tsetActive(false)\n\t\t\tswitchInput.disabled = true\n\t\t\tdatabase\n\t\t\t\t.collection('menus')\n\t\t\t\t.where('idUser', '==', currentUser.uid)\n\t\t\t\t.get()\n\t\t\t\t.then(function (querySnapshot) {\n\t\t\t\t\tvar batch = database.batch()\n\n\t\t\t\t\tquerySnapshot.forEach(function (doc) {\n\t\t\t\t\t\tbatch.delete(doc.ref)\n\t\t\t\t\t})\n\t\t\t\t\treturn batch.commit()\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tswitchInput.disabled = false\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tNotiflix.Notify.Failure('Algo salió mal.')\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst getMenuData = async () => {\n\t\tconst switchInput = document.getElementById('switch')\n\t\tconst menus = []\n\t\ttry {\n\t\t\tconst response = await database\n\t\t\t\t.collection('menus')\n\t\t\t\t.where('idUser', '==', currentUser.uid)\n\t\t\t\t.get()\n\n\t\t\tresponse.forEach((doc) => {\n\t\t\t\tmenus.push({ ...doc.data(), id: doc.id })\n\t\t\t})\n\t\t} catch (error) {\n\t\t\tNotiflix.Notify.Failure('Algo salió mal.')\n\t\t}\n\t\tif (menus.length) {\n\t\t\tswitchInput.checked = true\n\t\t\tsetActive(true)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"user-panel-container\">\n\t\t\t<div className=\"user-panel\">\n\t\t\t\t<HeaderUserPanel currentUser={currentUser} />\n\t\t\t\t<div className=\"user-panel__title\">\n\t\t\t\t\t<h1 className=\"user-panel__title--h1\">{title}</h1>\n\t\t\t\t\t{isMiMenu && (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => openModal(true)}\n\t\t\t\t\t\t\tclassName=\"user-panel__title--button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAñadir comida\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"user-panel__title--button-icon\"\n\t\t\t\t\t\t\t\tsrc=\"/img/icons/plus-circle.svg\"\n\t\t\t\t\t\t\t\talt=\"+\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t\t{isMiMenu && (\n\t\t\t\t\t\t<div className=\"switch-container\">\n\t\t\t\t\t\t\t<span className=\"switch-container__text\">Publicar</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tclassName=\"user-panel__switch_input\"\n\t\t\t\t\t\t\t\tid=\"switch\"\n\t\t\t\t\t\t\t\tonChange={handleCheck}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<label className=\"user-panel__switch_label\" htmlFor=\"switch\">\n\t\t\t\t\t\t\t\tToggle\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default UserPanelLayout\n"]},"metadata":{},"sourceType":"module"}